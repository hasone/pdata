/** ! hewoxin 2017-02-20 */
function getTelInfo(a){var b=a.val(),c=!1;b?/^1[3|4|5|7|8]\d{9}$/.test(b)?($("#bind-tip").css("color","#aaa").html("中国移动"),c=!0):$("#bind-tip").css("color","red").html("请输入正确的手机号码！"):$("#bind-tip").css("color","red").html("请输入手机号码！"),a.data("validate",c)}function getCodeInfo(a){var b=a.val(),c=!1;b?/^[0-9]{6}$/.test(b)?($("#bind-tip2").html(""),c=!0):$("#bind-tip2").css("color","red").html("验证码错误！"):$("#bind-tip2").css("color","red").html("请输入验证码！"),a.data("validate",c)}function bindBtn(){var a="true"===$("#bind-tel").data("validate"),b="true"===$("#bind-code").data("validate"),c=a&&b;c?$("#bind-btn").removeClass("btn-disabled"):$("#bind-btn").addClass("btn-disabled")}function showDialogContent(a){$("#bind-alert .modal-content").addClass("hide"),$(".body-"+a).removeClass("hide")}function failBtn(){$("#bind-code").val(""),$("#bind-code").data("validate",!1),bindBtn()}function time(a){0===wait?(a.removeClass("btn-disabled"),a.html("重新发送验证码"),wait=60):(a.addClass("btn-disabled"),a.html("重新获取("+wait+")"),wait--,timer=setTimeout(function(){time(a)},1e3))}$(function(){$("#bind-tel").blur(function(){getTelInfo($(this)),bindBtn()}),$("#bind-code").blur(function(){getCodeInfo($(this)),bindBtn()}),$(".get-code").click(function(){var a=this,b=$("#bind-tel").val();return!$(this).hasClass("btn-disabled")&&void("true"===$("#bind-tel").data("validate")?(time($(a)),$("#bind-tip2").html(""),$(this).data("isClick","true"),$.post(ctx+"/lottery/getMessage.html",{tel:b},function(){})):""===$("#bind-tel").val()&&$("#bind-tip").css("color","red").html("请输入手机号码！"))}),$(".failBtn").click(function(){failBtn()}),$("#bind-btn").click(function(){var a=this;$(a).addClass("btn-disabled");var b=$("#bind-tel").val(),c=$("#bind-code").val();"true"===$(".get-code").data("isClick")?$.ajax({url:ctx+"/lottery/bind.html",type:"POST",dataType:"json",data:{tel:b,code:c},success:function(a){showDialogContent(a.success?"success":"failure")},error:function(){showDialogContent("busy")},complete:function(){$(a).removeClass("btn-disabled")}}):showDialogContent("failure"),$("#bind-alert").modal("show")})});var timer,wait=60;